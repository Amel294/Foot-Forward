<div class="nk-content">
  <div class="container-fluid">
    <div class="nk-content-inner">
      <div class="nk-content-body">
        <div class="nk-block-head nk-block-head-sm">
          <div class="nk-block-between g-3">
            <div class="nk-block-head-content">
              <h3 class="nk-block-title page-title">Edit Product</h3>
            </div>
          </div>
        </div>
        <div class="nk-block">
          <div class="card">
            <div class="card-inner">
              <form id="productForm" action="javascript:void(0);" method="POST" enctype="multipart/form-data">
                <input type="hidden" name="productId" value="<%= product.productId %>">

                <div class="row gy-4">



                  <div class="col-sm-6">
                    <div class="form-group">
                        <label class="form-label" for="default-01">Brand Name</label>
                        <div class="form-control-wrap">
                            <input type="text" class="form-control" id="edit_brand_old" placeholder="" value="<%= product.brand.name %>" name="oldBrand" disabled>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="form-label">Select New Brand</label>
                        <div class="form-control-wrap">
                            <select class="form-select js-select2" data-search="on" id="edit_brand_new" name="newBrand">
                                <% allBrands.forEach(function(brand) { %>
                                    <% if(brand._id.toString() === product.brand._id.toString()) { %>
                                        <option value="<%= brand._id %>" selected><%= brand.name %></option>
                                    <% } else { %>
                                        <option value="<%= brand._id %>"><%= brand.name %></option>
                                    <% } %>
                                <% }) %>
                            </select>
                        </div>
                    </div>
                </div>
                
                

                  <div class="col-sm-6">
                    <div class="form-group">
                      <label class="form-label" for="default-01">Product Name</label>
                      <div class="form-control-wrap">
                        <input type="text" class="form-control" id="edit_name_old" placeholder="" name="name" value="<%= product.name %>" disabled>
                      </div>
                    </div>
                  </div>


                  <div class="col-sm-6">
                    <div class="form-group">
                      <label class="form-label" for="default-01">New Product Name</label>
                      <div class="form-control-wrap">
                        <input type="text" class="form-control" id="edit_name_new" placeholder="Enter product name"
                          name="name">
                      </div>
                    </div>
                  </div>



                  <div class="col-sm-6">
                    <div class="form-group">
                      <label class="form-label" for="default-03">Price</label>
                      <div class="form-control-wrap">
                        <div class="form-icon form-icon-left">₹</div>
                        <input type="text" class="form-control" id="edit_price_old" placeholder="" name="price" value="<%= product.price %>" disabled>
                      </div>
                    </div>
                  </div>


                  <div class="col-sm-6">
                    <div class="form-group">
                      <label class="form-label" for="default-03">New Price</label>
                      <div class="form-control-wrap">
                        <div class="form-icon form-icon-left">₹</div>
                        <input type="text" class="form-control" id="edit_price_new" placeholder="Enter price of product"
                          name="price">
                      </div>
                    </div>
                  </div>



                  <div class="col-sm-6">
                    <div class="form-group">
                      <label class="form-label" for="default-01">Category</label>
                      <div class="form-control-wrap">
                        <input type="text" class="form-control" id="edit_category_old" placeholder="" value="<%= product.category %>" name="name" disabled>
                      </div>
                    </div>
                  </div>


                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="form-label">New Category</label>
                      <div class="form-control-wrap">
                        <select class="form-select" id="edit_category_new" name="category">
                          <option value="Men" <% if (product.category === 'Men') { %>selected<% } %>>Men</option>
                          <option value="Women" <% if (product.category === 'Women') { %>selected<% } %>>Women</option>
                          <option value="Unisex" <% if (product.category === 'Unisex') { %>selected<% } %>>Unisex</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  



                  <div class="col-sm-6">
                    <div class="form-group">
                      <label class="form-label" for="default-01">Subcategory</label>
                      <div class="form-control-wrap">
                        <input type="text" class="form-control" id="edit_subcategory_old" placeholder="" value="<%= product.subcategory.Subcategory %>" name="name" disabled>
                      </div>
                    </div>
                  </div>


                  <div class="col-md-6">
                    <div class="form-group">
                      <label class="form-label">Subcategory</label>
                      <div class="form-control-wrap">
                        <select class="form-select" id="edit_subcategory_new" name="subcategory">
                          <% allSubcategories.forEach(function(subcategory) { %>
                            <% if(subcategory._id.toString() === product.subcategory._id.toString()) { %>
                              <option value="<%= subcategory._id %>" selected><%= subcategory.Subcategory %></option>
                            <% } else { %>
                              <option value="<%= subcategory._id %>"><%= subcategory.Subcategory %></option>
                            <% } %>
                          <% }) %>
                        </select>
                        
                      </div>
                    </div>
                  </div>


                  <div class="col-lg-6">
                    <div class="form-group">
                      <label class="form-label" for="cf-default-textarea">Product Description</label>
                      <div class="form-control-wrap">
                        <textarea class="form-control form-control-sm" id="edit_description_old"
                          placeholder="" name="description" disabled><%= product.description %></textarea>
                      </div>
                    </div>
                  </div>
                  

                  <div class="col-lg-6">
                    <div class="form-group">
                      <label class="form-label" for="cf-default-textarea">New Product Description</label>
                      <div class="form-control-wrap">
                        <textarea class="form-control form-control-sm" id="edit_description_new"
                          placeholder="Describe your Product" name="description"></textarea>
                      </div>
                    </div>
                  </div>



                  
                  <h4 class="mt-5">Images</h4>
                  <div class="col-lg-12">
                    <div class="product-images" style="display: flex; overflow-x: auto;">
                      <% for(let i = 0; i < product.images.length; i++) { %>
                        <div class="image-container shadow p-3 mb-5 bg-white rounded" style="margin-right: 10px; position: relative;">
                          <img src="data:image/png;base64,<%= product.images[i].data.toString('base64') %>" alt="Product Image <%= i %>" style="max-width: 300px; height: auto;">
                          <button type="button" class="btn btn-danger delete-image-btn" data-image-id="<%= product.images[i]._id %>">Delete</button>
                        </div>
                      <% } %>
                    </div>
                  </div>
                  
                  
                  
                  
                  























                  <div class="col-sm-12 mt-4">
                    <ul class="preview-list2">
                      <li class="preview-item">
                        <button type="submit" class="btn btn-primary" id="addProductBtn">Submit</button>
                      </li>
                    </ul>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<!-- Add this modal HTML structure to your page -->
<div class="modal fade" id="successModal" tabindex="-1" role="dialog" aria-labelledby="successModalLabel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="successModalLabel">Success!</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Product updated successfully.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
